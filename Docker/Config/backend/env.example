
# Example environment file for backend Docker Compose
# Copy this file to .env and fill in your real values.

# JWT Authentication Configuration
JWT_SECRET=your_jwt_secret_key_here          # Secret key for signing JWT tokens
JWT_EXPIRES_IN=30m                           # JWT access token expiration (e.g. 30m, 1h)
JWT_REFRESH_EXPIRATION=1d                    # JWT refresh token expiration (e.g. 1d, 7d)

# Upload path configuration
UPLOAD_BASE_PATH=/opt/backend/uploads           # Local path for file uploads (inside container)
UPLOAD_PUBLIC_URL=http://localhost:3300/uploads # Public URL to access uploaded files

# Google OAuth Configuration
GOOGLE_CLIENT_ID=your_google_client_id       # Google OAuth client ID (if using Google login)

# CORS Configuration
CORS_ORIGINS=http://localhost:8080           # Comma-separated list of allowed origins
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS # Allowed HTTP methods
CORS_HEADERS=Content-Type,Authorization,Accept,Origin,X-Requested-With # Allowed headers
CORS_CREDENTIALS=true                        # Allow credentials (true/false)

# Service URLs
BACKEND_URL=http://backend:3000              # Internal backend URL (used by other services)
FRONTEND_URL=http://localhost:8080           # Public frontend URL
N8N_BASE_URL=http://n8n:5678                 # n8n service base URL
N8N_INGEST_WEBHOOK=/webhook/ingest           # n8n ingest webhook path
N8N_QUERY_WEBHOOK=/webhook/query             # n8n query webhook path
N8N_DELETE_WEBHOOK=/webhook/delete           # n8n delete webhook path
N8N_FASTAPI_CONFIG=/webhook/fastapi/config   # n8n fastapi config webhook path

# Email language support (comma-separated ISO codes)
MAIL_LANGUAGES=en,it
# Template path
EMAIL_TEMPLATE_PATH=/opt/backend/templates/ # Local path where template are stored (inside container)

# Email configuration (example values, replace with your provider)
MAIL_HOST=smtp.example.com                   # SMTP server host
MAIL_PORT=465                                # SMTP server port
MAIL_SECURE=true                             # Use TLS/SSL (true/false)
MAIL_USER=your_email@example.com             # SMTP username
MAIL_PASSWORD=your_email_password            # SMTP password
MAIL_FROM=your_email@example.com             # Default sender address
MAIL_BCC=your_bcc@example.com                # Optional: BCC for all outgoing mail

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

DB_TYPE=pgsql                                # Database type (pgsql | mysql)

# PostgreSQL Database Configuration
PGSQL_HOST=postgresdb                        # Hostname of the Postgres service/container
PGSQL_PORT=5432                              # Postgres port
PGSQL_DATABASE=rag_db                        # Database name for the RAG system
PGSQL_USERNAME=rag_user                      # Database user for the RAG system
PGSQL_PASSWORD=your_rag_db_password          # Database password for the RAG user
PGSQL_SCHEMA=rag_schema                      # Default schema for the RAG system

# =============================================================================
# SSO CONFIGURATION
# =============================================================================
# LDAP
LDAP_AUTH=true                                      # Enable LDAP authentication (true/false)
LDAP_SERVER=ldap(s)://LDAP_HOST:389                 # LDAP server URL (use ldap:// or ldaps:// for SSL)
LDAP_APP_PASS=ADMIN_LDAP_PASSWORD                   # Password for LDAP admin/service account
LDAP_PASSWORD_CHANGE=http(s)://UTILITY_URL          # URL for password change utility (if supported)
LDAP_DIRECT_BIND=false                              # Use DIRECT BIND or SEARCH and BIND for authentication (true/false)
LDAP_BASE_DN=ou=peoples,dc=example,dc=org           # Base DN for user search (Distinguished Name root)
LDAP_APP_USER=cn=admin,dc=example,dc=org            # LDAP admin/service account username (Distinguished Name)
LDAP_FILTER=(&(objectClass=person)(uid={username})) # LDAP search filter for user lookup (use {username} as placeholder)
LDAP_FIELD_MAP=uid:username,mail:email,cn:fullName  # Map LDAP fields to app fields (format: ldapField:appField,...)
